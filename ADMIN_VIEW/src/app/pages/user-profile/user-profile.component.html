<div class="header bg-gradient-danger pb-8 pt-5 pt-md-8">
  <div class="container-fluid">
    <div class="header-body">
      <!-- Card stats -->
      <div class="row">
        <div class="col-xl-12 col-lg-6">
          <div class="card card-stats mb-4 mb-xl-0">
            <div class="card-body">
              <form nz-form [formGroup]="searchForm" class="ant-advanced-search-form">
                <div nz-row [nzGutter]="24">
                  <div nz-col [nzSpan]="8">
                    <nz-form-item>
                      <nz-form-label>Tên sản phẩm</nz-form-label>
                      <nz-form-control>
                        <input nz-input placeholder="Tên người dùng" formControlName="userName" />
                      </nz-form-control>
                    </nz-form-item>
                  </div>
                  <div nz-col [nzSpan]="8">
                    <nz-form-item>
                      <nz-form-label>Email</nz-form-label>
                      <nz-form-control>
                        <input nz-input placeholder="Email" formControlName="email" />
                      </nz-form-control>
                    </nz-form-item>
                  </div>
                  <div nz-col [nzSpan]="8">
                    <nz-form-item>
                      <nz-form-label>Số điện thoại</nz-form-label>
                      <nz-form-control>
                        <nz-input-number class="w-100" formControlName="phone" [nzMin]="0" [nzStep]="100000">
                        </nz-input-number>
                      </nz-form-control>
                    </nz-form-item>
                  </div>
                </div>
                <div nz-row>
                  <div nz-col [nzSpan]="24" class="search-area">
                    <button nz-button (click)="search()" [nzType]="'primary'">Search</button>
                    <button nz-button (click)="resetForm()">Clear</button>
                  </div>
                </div>
              </form>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<div class="container-fluid mt--7">
  <div class="row">
    <div class="col">
      <div class="card shadow border-0">
        <div class="card-header border-0">
          <div>
            <h3 class="mb-0">Danh sách Users</h3>
          </div>
          <div style="float: right;">
          </div>
          <nz-table nzShowSizeChanger [nzData]="listOfData" [nzFrontPagination]="false" [nzLoading]="loading"
            [nzTotal]="total" [nzPageSize]="pageSize" [nzPageIndex]="pageIndex"
            (nzQueryParams)="onQueryParamsChange($event)">
            <thead>
              <tr>
                <th style="text-align: center;">STT</th>
                <th nzColumnKey="userID" [nzSortFn]="true" style="text-align: center;">Mã KH</th>
                <th style="text-align: center;">Tên đăng nhập</th>
                <th style="text-align: center;">Email</th>
                <th style="text-align: center;">Phone</th>
                <th style="text-align: center;">Trạng thái</th>
                <th style=" display: flex; justify-content: space-around; align-items: center;"> <span>Thao tác</span>
                  <button (click)="showModal(null,'INSERT')" class="btn btn-sm btn-success"><i class="fa fa-plus"
                      aria-hidden="true"></i> Thêm
                    mới</button>
                  <!-- <a  title=""></a> -->
                </th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let data of listOfData; ; let i = index">
                <td>{{i+1}}</td>
                <td>{{data?.userID}}</td>
                <td>{{data?.username}}</td>
                <td>{{data?.userEmail}}</td>
                <td>{{data?.userPhone}}</td>
                <td>{{data?.enabled}}</td>
                <td>
                  <button (click)="showModal(data.userID,'EDIT')" class="btn btn-primary">Sửa</button>
                  <nz-divider nzType="vertical"></nz-divider>
                  <button (click)="delUser(data.userID)" class="m-5" class="btn btn-danger" nzDanger>Xóa</button>
                  <nz-divider nzType="vertical"></nz-divider>
                </td>
              </tr>
            </tbody>
          </nz-table>
        </div>
      </div>
    </div>
  </div>

  <nz-modal class="w-700" [(nzVisible)]="isVisible"
    nzTitle="{{isEdit?'Chỉnh sửa':(isInsert?'Thêm mới':'Xem chi tiết')}}" (nzOnCancel)="handleCancel()"
    (nzOnOk)="handleOk()">
    <ng-container *nzModalContent>
      <div class="f-container">
        <form nz-form [formGroup]="userForm">
          <nz-form-item>
            <nz-form-control nzErrorTip="Vui lòng nhập tên ">
              <div nz-row class="p-10">
                <div nz-col nzSpan="6">Tên người dùng</div>
                <div nz-col nzSpan="18">
                  <nz-input-group>
                    <input type="text" nz-input formControlName="userName" placeholder="Tên người dùng" />
                  </nz-input-group>
                </div>
              </div>
              <div nz-row class="p-10">
                <div nz-col nzSpan="6">Pass</div>
                <div nz-col nzSpan="18">
                  <nz-input-group>
                    <input type="text" nz-input formControlName="userPass" placeholder="Pass" />
                  </nz-input-group>
                </div>
              </div>
              <div nz-row class="p-10">
                <div nz-col nzSpan="6">Số điện thoại</div>
                <div nz-col nzSpan="18">
                  <nz-input-number class="w-100" formControlName="userPhone" [nzMin]="0" [nzStep]="100000">
                  </nz-input-number>
                </div>
              </div>
              <div nz-row class="p-10">
                <div nz-col nzSpan="6">Email</div>
                <div nz-col nzSpan="18">
                  <nz-input-group>
                    <input type="text" nz-input formControlName="userEmail" placeholder="Email" />
                  </nz-input-group>
                </div>
              </div>
              <div nz-row class="p-10">
                <div nz-col nzSpan="6">Trạng thái</div>
                <div nz-col nzSpan="18">
                  <label nz-checkbox formControlName="enabled"></label>
                </div>
              </div>
              <div nz-row class="p-10">
                <div nz-col nzSpan="6">Quyền</div>
                <div nz-col nzSpan="18">
                  <!-- <nz-select nzMode="multiple" nzPlaceHolder="Please select" [(ngModel)]="listOfSelectedValue">
                    <nz-option *ngFor="let item of listOfRole" [nzLabel]="name" [nzValue]="id"></nz-option>
                  </nz-select>
                  <ng-template #tagPlaceHolder let-selectedList>and {{ selectedList.length }} more
                    selected</ng-template> -->

                  <ng-select [items]="listOfRole" formControlName="roles" bindLabel="name" [multiple]="true"  [hideSelected]="true"
                    [(ngModel)]="listOfSelectedValue">
                  </ng-select>
                </div>
              </div>
            </nz-form-control>
          </nz-form-item>
        </form>
      </div>
    </ng-container>
  </nz-modal>