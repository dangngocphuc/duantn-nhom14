<div class="container" style="margin-top:110px">
    <nav class="d-flex align-items-center">
        <a href="/home" style="color: #00483d;">Trang chủ <span class="lnr lnr-arrow-right"></span>&nbsp;</a>
        <a href="#" style="color: #00483d;"> Giỏ hàng </a>
    </nav>
</div>
<div class="check-out">
    <div class="container">
        <ng-container *ngIf="listOfProduct.length > 0; else elseBlock">
            <div class="row">
                <div class="col-8">
                    <table class="table animated wow fadeInLeft" data-wow-delay=".5s">
                        <tr>
                            <th class="t-head" style="text-align: center;">Hình ảnh</th>
                            <th class="t-head" style="text-align: center;">Mặt Hàng</th>
                            <th class="t-head" style="text-align: center;">Giá</th>
                            <th class="t-head" style="text-align: center;">Số Lượng</th>
                            <th class="t-head" style="text-align: center;"></th>
                        </tr>
                        <tr *ngFor="let item of listOfProduct, index as i" class="cross1">
                            <td class="t-data" style="width: 25%; float: center;">
                                <!-- <a href="product-detail/{{item?.id}}" class="at-in"> -->

                                <ngb-carousel>
                                    <ng-template ngbSlide *ngFor="let item of item?.product?.listImage">
                                        <div class="picsum-img-wrapper">
                                            <img [src]="'../../assets/' + item.image" alt="Random first slide"
                                                height="90%" width="90%" />
                                        </div>
                                    </ng-template>
                                </ngb-carousel>
                                <!-- <a [href]="item?.product?.listImage?.[0].images">
                                    <img [src]="item?.product?.listImage?.[0].images" alt="">
                                </a> -->
                                <!-- {{item?.product?.listImage?.[0].thumbImage| json}} -->
                                <!-- <ng-image-slider #nav [images]="item?.product?.listImage" [infinite]="false"
                                    [autoSlide]="1" slideImage="1"
                                    [imageSize]="{width: '100%', height: '20%'}"></ng-image-slider> -->
                                <!-- </a> -->
                            </td>
                            <td class="t-data" style="width:25%;">
                                <h6>
                                    {{item?.productName}}
                                </h6>
                            </td>
                            <td class="t-data">
                                {{item?.productPrice | number}} VNĐ
                            </td>
                            <td class="t-data">
                                <div class="quantity">
                                    <div class="quantity-select">
                                        <div (click)="minusProduct(item)" class="entry value-minus">&nbsp;</div>
                                        <div class="entry value">
                                            <input style="width: 30px;text-align: center;border: none; outline: none;"
                                                type="text" name="quanlityBuy" id="quanlityBuy"
                                                (blur)="changeQuanlity($event,i,item)" [(ngModel)]="item.quanlityBuy">
                                            <!-- {{item?.quanlityBuy | number}} -->
                                        </div>
                                        <div (click)="plusProduct(item)" class="entry value-plus active">&nbsp;</div>
                                    </div>

                                </div>
                            </td>
                            <td class="t-data"><i (click)="delProduct(item?.id)" class="icon-del" nz-icon
                                    nzType="close-circle" nzTheme="outline" [nzTheme]="'twotone'"
                                    [nzTwotoneColor]="'#eb2f96'"></i> </td>
                        </tr>
                    </table>
                </div>
                <div class="col-4">
                    <h5 class="continue">Tổng Cộng Giỏ Hàng</h5>
                    <div class="price-details">
                        <h3>Nhập mã giảm giá</h3>
                        <div class="form-group row">
                            <div class="col-4">
                                <input type="text" name="code" id="code" class="form-control" [(ngModel)]="code" trim>
                            </div>
                            <div class="col-2" style="float: right;"><button (click)="addVorcher()" type="button"
                                    class="btn btn-primary">Áp dụng</button>
                            </div>
                        </div>
                        <hr>
                        <!-- <span>Tổng Cộng</span> -->
                        <!-- <span class="total1">
                            Tổng giá VND
                        </span> -->
                        <!-- <span>Giảm giá</span> -->
                        <!-- <span class="total1">{{salePrice | number}} VND</span> -->
                        <!-- <span>Phí vận chuyển</span> -->
                        <!-- <span class="total1">Miễn phí</span> -->
                        <div class="clearfix"></div>
                        <div>Bạn được giảm <b>{{promotion?.value}}</b> {{promotion?.type=='0'?'%':'VNĐ'}} cho đơn hàng
                        </div>
                    </div>
                    <!-- <div class="form-group row">
                        <div class="col"></div>
                    </div> -->
                    <ul class="total_price">
                        <li class="last_price">
                            <h5>Tổng tiền</h5>
                        </li>
                        <li class="last_price"><span>
                                {{sum| number}} VNĐ
                            </span></li>
                        <div class="clearfix"> </div>
                    </ul>
                    <ul class="total_price" *ngIf="discountPrice!=0">
                        <li class="last_price">
                            <h5>Giảm giá</h5>
                        </li>
                        <li class="last_price"><span>
                                {{discountPrice| number}} VNĐ
                            </span></li>
                        <div class="clearfix"> </div>
                    </ul>
                    <hr>
                    <ul class="total_price">
                        <li class="last_price">
                            <h5>Tổng tiền thanh toán</h5>
                        </li>
                        <li class="last_price"><span>
                                <h5>{{totalPrice| number}} VNĐ</h5>
                            </span>
                        </li>
                        <div class="clearfix"> </div>
                    </ul>
                    <hr>
                    <button class="btn btn-outline-success" style="float: right;" (click)="payment()">Thanh
                        Toán</button>
                </div>
            </div>
        </ng-container>
        <ng-template #elseBlock>
            <nz-result nzStatus="404" nzTitle="Giỏ hàng đang trống"
                nzSubTitle="Hãy thêm sản phẩm vào giỏ hàng bạn nhé!">
                <div nz-result-extra>
                    <a href="/products"><button nz-button nzType="primary">Xem sản phẩm</button></a>
                </div>
            </nz-result>
        </ng-template>
    </div>
</div>