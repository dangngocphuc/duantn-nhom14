<div class="container" style="margin-top:110px">
    <nav aria-label="breadcrumb" class="d-flex align-items-center">
        <ol class="breadcrumb">
            <li class="breadcrumb-item"><a href="/home">Trang chủ</a></li>
            <li class="breadcrumb-item"><a href="#" style="color: #00483d;"> Thanh toán</a></li>
        </ol>
    </nav>
</div>
<div class="login row">
    <div class="col-md-3"></div>
    <div class="col-md-6">
        <form [formGroup]="validateForm" class="row">
            <div class="col-md-12 login-do1 animated wow fadeInLeft" data-wow-delay=".5s">
                <div class="form-group">
                    <label for="">Tên khách hàng</label>
                    <input type="text" class="form-control" formControlName="userName" />
                </div>
                <div class="form-group">
                    <label for="">Số điện thoại</label>
                    <input type="text" class="form-control" formControlName="phone" />
                </div>
                <div class="form-group">
                    <label for="">Địa chỉ nhận hàng</label>
                    <input type="text" class="form-control" formControlName="specificAddress" />
                </div>
                <div class="row">
                    <div class="col-md-4">
                        <label for="">Tỉnh/thành phố</label>
                        <ng-select [items]="listProvince" bindLabel="ProvinceName" bindValue="ProvinceID"
                            formControlName="province" style="width: 100%;" [(ngModel)]="provinceId"
                            (change)="getListDistrict()">
                        </ng-select>
                    </div>
                    <div class="col-md-4">
                        <label for="">Quận/Huyện</label>
                        <ng-select [items]="listDistrict" bindLabel="DistrictName" formControlName="district"
                            bindValue="DistrictID" style="width: 100%;" [hideSelected]="true" (change)="getListWard()"
                            [(ngModel)]="districtId">
                        </ng-select>
                    </div>
                    <div class="col-md-4">
                        <label for="">Phường/Xã</label>
                        <ng-select [items]="listWard" bindLabel="WardName" bindValue="WardCode" formControlName="ward"
                            style="width: 100%;" [(ngModel)]="wardCode">
                        </ng-select>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-12">
                        <button (click)="openModal()" type="button" class="btn btn-primary" style="float: right;border: none;background-color: white;
                        color: blue;">Thay đổi địa
                            chỉ</button>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-6">
                        <label for="">Phương thức vận chuyển</label>
                        <ng-select [items]="listService" bindLabel="short_name" bindValue="service_id"
                            formControlName="service" style="width: 100%;" [(ngModel)]="serviceId"
                            (change)="getFeeService()">
                        </ng-select>
                    </div>
                    <div class="col-md-6">
                        <label for=""></label>
                        <div style="width: 100%;">phí vận chuyển: <span style="color: red;">{{responseFeeSevice?.total |
                                number }} VNĐ</span>
                        </div>
                        <div>
                            Nhận hàng vào: {{leadTime| date : 'dd/MM/yyyy'}}
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-sm-6">
                        <span style="color: blue;">Đơn vị vận chuyển:</span>
                        <img style="height: 100px; width: 200px;"
                            src="../assets/images/Giao_Hang_Nhanh_Toan_Quoc.b7d18fe5.png" alt="">
                    </div>
                </div>
                <!-- <ngx-paypal [config]="payPalConfig"></ngx-paypal> -->
                <nz-form-item>
                    <nz-form-label>Phương thức thanh toán</nz-form-label>
                    <nz-select formControlName="payment">
                        <nz-option nzValue="Live" nzLabel="Trực tiếp"></nz-option>
                        <nz-option nzValue="Bank transfer" nzLabel="Thanh toán qua vnpay"></nz-option>
                    </nz-select>
                </nz-form-item>
                <nz-form-item class="row">
                    <!-- <div class="col-md-8"> <button type="button" class="btn btn-outline-primary"
                            (click)="paymentVnpay()">Thanh toán vnpay</button></div> -->
                    <!-- <div class="col-md-4"> -->
                    <button type="button" (click)="submitForm()" class="btn btn-outline-success">Xác nhận thanh
                        toán</button>
                    <!-- </div> -->
                </nz-form-item>
            </div>
            <div class="clearfix"> </div>
        </form>
    </div>
    <div class="col-md-3"></div>
</div>

<modal #ListAddress>
    <modal-header>
        Địa chỉ của tôi
    </modal-header>
    <modal-content>
        <ul>
            <li *ngFor="let item of  this.currentUser?.listAddress" class="nav-item">
                <div>
                    <div style="border: 1px solid silver; margin: 5px; border-radius: 10px;">
                        <div style="margin: 5px;">
                            {{item?.specificAddress}}
                            <div>
                                Tỉnh/Thành phố
                                <ng-select [items]="listProvince" bindLabel="ProvinceName" bindValue="ProvinceID"
                                    style="width: 100%;" name="province" [(ngModel)]="item.provinceID">
                                </ng-select>
                            </div>
                            <div>
                                <label for="">Quận/Huyện</label>
                                <ng-select [items]="item.listDistrict" bindLabel="DistrictName" name="district"
                                    bindValue="DistrictID" style="width: 100%;" [hideSelected]="true"
                                    [(ngModel)]="item.districtID">
                                </ng-select>
                            </div>
                            <div>
                                <label for="">Phường/Xã</label>
                                <ng-select [items]="item.listWard" bindLabel="WardName" bindValue="WardCode" name="ward"
                                    style="width: 100%;" [(ngModel)]="item.wardCode">
                                </ng-select>
                            </div>
                            <div>
                                <input class="pixel-radio" type="checkbox" id="addAddress" name="addAddress"
                                    [(ngModel)]="item.check" (click)="updateSelectedOption(item)">
                                <span style="color: orange;" *ngIf="item.defaults==1">Địa chỉ mặc Định</span>
                                <span *ngIf="item.defaults!=1">Địa chỉ khác</span>
                            </div>
                        </div>
                    </div>
                </div>
            </li>
            <li><button class="btn btn-outline-secondary" (click)="addAddress()"><i class="fa fa-plus"
                        aria-hidden="true"></i> Thêm
                    địa chỉ
                    mới</button></li>
        </ul>
    </modal-content>
    <div>

    </div>
    <modal-footer>
        <div class="row">
            <button class="btn btn-primary" (click)="confirm()">Xác nhận</button>
        </div>
    </modal-footer>
</modal>
<modal #Address>
    <modal-header>
        Địa chỉ Mới
    </modal-header>
    <modal-content>
        <div class="modal-dialog modal-dialog-scrollable">
            <form>
                <div class="form-group">
                    <label for="">Địa chỉ nhận hàng</label>
                    <input type="text" class="form-control" name="addAddress" [(ngModel)]="addresss.specificAddress" />
                </div>
                <div class="row">
                    <div class="col-md-4">
                        <label for="">Tỉnh/thành phố</label>
                        <ng-select [items]="listProvince" bindLabel="ProvinceName" bindValue="ProvinceID"
                            name="province" style="width: 100%;" [(ngModel)]="addresss.provinceID"
                            (change)="getListDistrict()">
                        </ng-select>
                    </div>
                    <div class="col-md-4">
                        <label for="">Quận/Huyện</label>
                        <ng-select [items]="listDistrict" bindLabel="DistrictName" name="district"
                            [(ngModel)]="addresss.districtID" bindValue="DistrictID" style="width: 100%;"
                            [hideSelected]="true" (change)="getListWard()">
                        </ng-select>
                    </div>
                    <div class="col-md-4">
                        <label for="">Phường/Xã</label>
                        <ng-select [items]="listWard" bindLabel="WardName" bindValue="WardCode" name="ward"
                            [(ngModel)]="addresss.wardCode" style="width: 100%;">
                        </ng-select>
                    </div>
                </div>
                <div>
                    <input class="pixel-radio" type="checkbox" id="add" name="add" [(ngModel)]="addresss.defaults">
                    <label for="">Đặt làm địa chỉ mặc định</label>
                </div>
            </form>
        </div>
    </modal-content>
    <modal-footer>
        <div class="row">
            <button class="btn btn-primary" (click)="complete()">Hoàn thành</button>
        </div>
    </modal-footer>
</modal>